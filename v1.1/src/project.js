require=function t(e,i,s){function n(o,c){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!c&&h)return h(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var r=i[o]={exports:{}};e[o][0].call(r.exports,function(t){var i=e[o][1][t];return n(i||t)},r,r.exports,t,e,i,s)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({BonusStack:[function(t,e,i){"use strict";cc._RF.push(e,"650d5Ost3VOR5/zbiA37gum","BonusStack");var s=function(t){return t&&t.__esModule?t:{default:t}}(t("./utils/MessagePipeline"));cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this.objects=[],this.node.children.forEach(function(e){var i=e.getComponent("LCObject");i&&t.objects.push(i)},this),this._stackCount=0,this._stackMax=this.objects.length,this._stackReduceTimer=25,this._stackFilled=!1,this._blinkTimer=0,this._blinkTime=0,s.default.on("gameStart",this._gameStart,this),s.default.on("addStack",this._addStack,this),s.default.on("tickStack",this._tick,this)},_gameStart:function(){this._stackCount=0,this._stackFilled=!1,this.stackDisplay()},_addStack:function(){this._stackCount=Math.min(this._stackCount+1,this._stackMax),this.stackDisplay(),this._stackCount===this._stackMax?(s.default.sendMessage("tickStop"),s.default.sendMessage("addScore",14),this._stackFilled=!0,s.default.sendMessage("soundPlay","Bonus")):s.default.sendMessage("soundPlay","Goal")},reduceStack:function(){this._stackCount=Math.max(this._stackCount-1,0),this.stackDisplay()},stackDisplay:function(){for(var t=0;t<this._stackMax;t++)this.objects[t].display(t<this._stackCount);this._stackReduceTimer=25},_tick:function(){0!==this._stackCount&&(this._stackReduceTimer-=1,this._stackReduceTimer<=0&&this.reduceStack())},update:function(t){var e=this;this._stackFilled&&(this._blinkTimer+=t,this.objects.forEach(function(t,i){t.display(e._blinkTimer<.2)},this),this._blinkTimer>=.4&&(this._blinkTimer=0,this._blinkTime+=1,this._blinkTime>=4&&(this._stackFilled=!1,this._stackCount=0,this._blinkTimer=0,this._blinkTime=0,this.stackDisplay(),s.default.sendMessage("turnStart",!1))))}}),cc._RF.pop()},{"./utils/MessagePipeline":"MessagePipeline"}],Game:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}cc._RF.push(e,"3ff6ez0uR9Fi5R3VTWIoNIl","Game");var n=s(t("./utils/MessagePipeline")),a=s(t("./Player")),o=s(t("./Lanes")),c=s(t("./Life")),h=s(t("./LCObject"));cc.Class({extends:cc.Component,properties:{player:a.default,lanes:o.default,life:c.default,sound:h.default,gameLabel:h.default,overLabel:h.default},onLoad:function(){var t=this;n.default.on("checkHitFromBlock",this._checkHitFromBlock,this),n.default.on("checkHitFromPlayer",this._checkHitFromPlayer,this),n.default.on("gameOver",this._gameOver,this),this._allLCObjects=[],this._allLCObjects=this.node.getComponentsInChildren("LCObject"),this._isDemo=!1,this._start=!1,this._gameOver=!1,this._gameOverAnimationTimer=0,this._gameOverBlinkTime=0,setTimeout(function(){t._demoStart()})},_demoStart:function(){this._isDemo=!0,this.gameLabel.displayOn(),this.overLabel.displayOn(),n.default.sendMessage("demoStart")},$startButton:function(){this._start||(this._isDemo=!1,this._start=!0,n.default.sendMessage("demoStop"),this._gameStart())},_gameStart:function(){n.default.sendMessage("soundPlay","GameStart"),n.default.sendMessage("scoreReset"),this.gameLabel.displayOn(),this.overLabel.displayOff(),setTimeout(function(){n.default.sendMessage("gameStart"),n.default.sendMessage("turnStart",!0)},2500),this._gameOver=!1,this._gameOverAnimationTimer=0,this._gameOverBlinkTime=0},_checkHitFromBlock:function(t){var e=t.getUserData(),i=this.player.index;e===i&&(this.life.damage(),n.default.sendMessage("tickStop"),n.default.sendMessage("playerHit",i))},_checkHitFromPlayer:function(t){for(var e=t.getUserData(),i=this.lanes.getBottomLanes(),s=0;s<i.length;s++)i[s]===e&&(this.life.damage(),n.default.sendMessage("tickStop"),n.default.sendMessage("playerHit",e))},_gameOver:function(){n.default.sendMessage("soundPlay","GameOver"),this.overLabel.displayOn(),this._gameOver=!0},update:function(t){this._gameOver&&(this._gameOverAnimationTimer+=t,this._gameOverAnimationTimer<.5?this._allLCObjects.forEach(function(t,e){t.displayOn()},this):this._allLCObjects.forEach(function(t,e){t.displayOff()},this),this._gameOverAnimationTimer>=1&&(this._gameOverAnimationTimer=0,this._gameOverBlinkTime+=1,this._gameOverBlinkTime>=2&&(this._start=!1,this._gameOver=!1,this._gameOverBlinkTime=0,this._demoStart())))}}),cc._RF.pop()},{"./LCObject":"LCObject","./Lanes":"Lanes","./Life":"Life","./Player":"Player","./utils/MessagePipeline":"MessagePipeline"}],LCDigit:[function(t,e,i){"use strict";cc._RF.push(e,"b653dDvGj9HpoYlzzgkCjqe","LCDigit");var s=[[!0,!0,!0,!1,!0,!0,!0],[!1,!1,!0,!1,!1,!0,!1],[!0,!1,!0,!0,!0,!1,!0],[!0,!1,!0,!0,!1,!0,!0],[!1,!0,!0,!0,!1,!0,!1],[!0,!0,!1,!0,!1,!0,!0],[!0,!0,!1,!0,!0,!0,!0],[!0,!1,!0,!1,!1,!0,!1],[!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!1,!0,!0]];cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this.objects=[],this.node.children.forEach(function(e){var i=e.getComponent("LCObject");i&&t.objects.push(i)},this)},display:function(t){var e=s[t];e?this.objects.forEach(function(t,i){t.display(e[i])},this):this.objects.forEach(function(t,e){t.displayOff()},this)}}),cc._RF.pop()},{}],LCObject:[function(t,e,i){"use strict";cc._RF.push(e,"d00bbU09jhGsrlM9uQX6IbO","LCObject"),cc.Class({extends:cc.Component,properties:{objectOn:cc.Sprite,defaultDisplay:!1},onLoad:function(){this.objectOn.node.active=this.defaultDisplay,this.objectOn.node.width=this.node.width,this.objectOn.node.height=this.node.height,this.objectOn.spriteFrame=this.node.getComponent(cc.Sprite).spriteFrame},display:function(t){this.objectOn.node.active=t},displayOn:function(){this.objectOn.node.active=!0},displayOff:function(){this.objectOn.node.active=!1}}),cc._RF.pop()},{}],Lanes:[function(t,e,i){"use strict";cc._RF.push(e,"0e1c3XTFMJKPZXVxEwGKhfA","Lanes");var s=function(t){return t&&t.__esModule?t:{default:t}}(t("./utils/MessagePipeline")),n=[0,0,0,0,0],a=[[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],[[1,1,0,0,0],[1,0,1,0,0],[1,0,0,1,0],[1,0,0,0,1],[0,1,1,0,0],[0,1,0,1,0],[0,1,0,0,1],[0,0,1,1,0],[0,0,1,0,1],[0,0,0,1,1]]];cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this._lanes=[],this.node.children.forEach(function(e){var i=e.getComponent("Lane");i&&t._lanes.push(i)},this),this._tickStart=!1,this._tickTimer=.72,this._timer=0,this._tickTimes=0,this._demo=!1,s.default.on("gameStart",this._gameStart,this),s.default.on("turnStart",this._turnStart,this),s.default.on("tickStop",this._tickStop,this),s.default.on("levelUp",this._levelUp,this),s.default.on("demoStart",this._demoStart,this),s.default.on("demoStop",this._demoStop,this)},_demoStart:function(){this._tickStart=!0,this._tickTimer=.5,this._demo=!0},_demoStop:function(){this._tickStart=!1,this._demo=!1},update:function(t){this._tickStart&&(this._timer+=t,this._timer>=this._tickTimer&&(this._timer-=this._tickTimer,this._demo?this._demoTick():this._gameTick()))},_demoTick:function(){this._lanes.forEach(function(t,e){t.demoTick()},this),s.default.sendMessage("demoTick")},_gameTick:function(){var t=this.getPattern();this._lanes.forEach(function(e,i){e.tick(t[i])},this),s.default.sendMessage("soundPlay","Tick"),s.default.sendMessage("tickStack")},getPattern:function(){this._tickTimes=(this._tickTimes+1)%6;var t=void 0;if(0===this._tickTimes)t=n;else{var e=void 0;t=(e=Math.random()<.75?a[0]:a[1])[Math.floor(Math.random()*e.length)]}return t},_gameStart:function(){this._demo=!1,this._tickTimer=.72},_turnStart:function(t){var e=t.getUserData();this._tickStart=!0,this._timer=this._tickTimer,e&&this._lanes.forEach(function(t,e){t.reset()},this)},_tickStop:function(){this._tickStart=!1},_levelUp:function(){this._tickTimer=Math.max(this._tickTimer-.04,.2)},getBottomLanes:function(){var t=[];return this._lanes.forEach(function(e,i){e.isBotton()&&t.push(e.laneIndex)},this),t}}),cc._RF.pop()},{"./utils/MessagePipeline":"MessagePipeline"}],Lane:[function(t,e,i){"use strict";cc._RF.push(e,"8a993q9VWtKYqmZpsQL9ylb","Lane");var s=function(t){return t&&t.__esModule?t:{default:t}}(t("./utils/MessagePipeline")),n=[[0],[1],[2],[3],[4],[5],[0,5],[1,5],[2,5],[3,5],[4,5],[0,4,5],[1,4,5],[2,4,5],[3,4,5],[0,3,4,5],[1,3,4,5],[2,3,4,5],[0,2,3,4,5],[1,2,3,4,5],[0,1,2,3,4,5],[],[0,1,2,3,4,5],[]];cc.Class({extends:cc.Component,properties:{laneIndex:0},onLoad:function(){var t=this;s.default.on("demoStart",this._demoStart,this),s.default.on("demoStop",this._demoStop,this),this.objects=[],this.node.children.forEach(function(e){var i=e.getComponent("LCObject");i&&t.objects.push(i)},this),this._blockIndexes=[],this._demoIndex=0,this.maxIndex=this.objects.length-1,this.displayBlock()},_demoStart:function(){this._demoIndex=0},_demoStop:function(){this._demoIndex=0,this._blockIndexes=[],this.displayBlock()},isBotton:function(){for(var t=0;t<this._blockIndexes.length;t++)if(this._blockIndexes[t]>=0&&this._blockIndexes[t]===this.maxIndex)return!0;return!1},demoTick:function(){this._blockIndexes=n[this._demoIndex],this._demoIndex=(this._demoIndex+1)%n.length,this.displayBlock()},tick:function(t){for(var e=0;e<this._blockIndexes.length;e++)this._blockIndexes[e]>=0&&(this._blockIndexes[e]+=1,this._blockIndexes[e]===this.maxIndex?s.default.sendMessage("checkHitFromBlock",this.laneIndex):this._blockIndexes[e]>this.maxIndex&&(this._blockIndexes.splice(e,1),e-=1));1===t&&this._blockIndexes.push(0),this.displayBlock()},displayBlock:function(){var t=this;this.objects.forEach(function(e,i){for(var s=!1,n=0;n<t._blockIndexes.length;n++)t._blockIndexes[n]===i&&(s=!0);e.display(s)},this)},reset:function(){this._blockIndexes=[],this.displayBlock()}}),cc._RF.pop()},{"./utils/MessagePipeline":"MessagePipeline"}],Life:[function(t,e,i){"use strict";cc._RF.push(e,"bab6822JplCDqbXba4G9NYH","Life");var s=function(t){return t&&t.__esModule?t:{default:t}}(t("./utils/MessagePipeline"));cc.Class({extends:cc.Component,properties:{life:{get:function(){return this._life},visible:!1}},onLoad:function(){var t=this;this.lives=[],this.node.children.forEach(function(e){var i=e.getComponent("LCObject");i&&t.lives.push(i)},this),this._life=this.lives.length,s.default.on("gameStart",this._gameStart,this)},displayLives:function(){var t=this;this.lives.forEach(function(e,i){e.display(i<t._life)},this)},damage:function(){this._life-=1,this.displayLives()},_gameStart:function(){this._life=this.lives.length,this.displayLives()}}),cc._RF.pop()},{"./utils/MessagePipeline":"MessagePipeline"}],Materials:[function(t,e,i){"use strict";cc._RF.push(e,"f9fccye3HJGs4NDdYRp/Jv7","Materials"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this.objects=[],this.node.children.forEach(function(e){var i=e.getComponent("LCObject");i&&t.objects.push(i)},this)},displayMaterialOn:function(t){this.objects&&this.objects.forEach(function(e,i){e.display(i===t)},this)},displayMaterialOff:function(){this.objects&&this.objects.forEach(function(t,e){t.displayOff()},this)}}),cc._RF.pop()},{}],MessagePipeline:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}cc._RF.push(e,"625d7RuJc5DOqpw5NUnH5Ml","MessagePipeline"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),c=new(function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,cc.EventTarget),o(e,[{key:"sendMessage",value:function(t,e){cc.log("[System Message] "+t),this.emit(t,e)}}]),e}());i.default=c,e.exports=i.default,cc._RF.pop()},{}],MoveButton:[function(t,e,i){"use strict";cc._RF.push(e,"be74f49ZixMoKXJao06xcgj","MoveButton");var s=function(t){return t&&t.__esModule?t:{default:t}}(t("./utils/MessagePipeline"));cc.Class({extends:cc.Component,properties:{isRight:!1},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this)},_onTouchBegan:function(t){this.isRight?s.default.sendMessage("moveRight"):s.default.sendMessage("moveLeft")}}),cc._RF.pop()},{"./utils/MessagePipeline":"MessagePipeline"}],PlayerHit:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}cc._RF.push(e,"0f003pkY6xARb80sGIdxgH4","PlayerHit");var n=s(t("./utils/MessagePipeline")),a=s(t("./Life"));cc.Class({extends:cc.Component,properties:{life:a.default},onLoad:function(){var t=this;this.hits=[],this.node.children.forEach(function(e){var i=e.getComponent("LCObject");i&&t.hits.push(i)},this),this._hitAnimation=!1,this._hitAnimationTimer=0,this._hitBlinkTime=0,this._hitIndex=0,n.default.on("playerHit",this._playerHit,this)},_playerHit:function(t){this._hitIndex=t.getUserData(),this._hitAnimation=!0,this._hitAnimationTimer=0,this._hitBlinkTime=0,n.default.sendMessage("soundPlay","Damage")},update:function(t){var e=this;this._hitAnimation&&(this._hitAnimationTimer+=t,this._hitAnimationTimer<.2?this.hits.forEach(function(t,i){t.display(i===e._hitIndex-1)},this):this.hits.forEach(function(t,e){t.displayOff()},this),this._hitAnimationTimer>=.4&&(this._hitAnimationTimer=0,this._hitBlinkTime+=1,this._hitBlinkTime>=4&&(this._hitAnimation=!1,this.life.life<0?n.default.sendMessage("gameOver"):n.default.sendMessage("turnStart",!1))))}}),cc._RF.pop()},{"./Life":"Life","./utils/MessagePipeline":"MessagePipeline"}],Player:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}cc._RF.push(e,"23ab3LxjTdDfZo8kyGzIxCh","Player");var n=s(t("./utils/MessagePipeline")),a=(s(t("./LCObject")),s(t("./Materials")));cc.Class({extends:cc.Component,properties:{index:{get:function(){return this._index},visible:!1},materials:a.default},onLoad:function(){var t=this;this.objects=[],this.node.children.forEach(function(e){var i=e.getComponent("LCObject");i&&t.objects.push(i)},this),this.indexMax=this.objects.length-1,this._index=0,this.displayPlayer(),this._goalRight=!0,this._movable=!1,this._goalCount=0,this._demoTickCount=0,n.default.on("turnStart",this._turnStart,this),n.default.on("tickStop",this._moveStop,this),n.default.on("moveLeft",this._moveLeft,this),n.default.on("moveRight",this._moveRight,this),n.default.on("demoStart",this._demoStart,this),n.default.on("demoStop",this._demoStop,this),n.default.on("demoTick",this._demoTick,this)},_demoStart:function(){this._demoPlay=!0,this._demoTickCount=-1},_demoStop:function(){this._demoPlay=!1,this.objects.forEach(function(t,e){t.displayOff()},this)},_demoTick:function(){var t=this;this._demoTickCount=(this._demoTickCount+1)%(2*this.indexMax),this.objects.forEach(function(e,i){e.display(i===t.indexMax-Math.abs(t._demoTickCount-t.indexMax))},this)},_moveLeft:function(){if(this._movable&&(!this._goalRight||1!==this._index)){var t=this._index;this._index=Math.max(0,this._index-1),!this._goalRight&&t>0&&0===this._index?(this._goalRight=!0,this.goalCountUp(),n.default.sendMessage("addStack"),n.default.sendMessage("addScore",1)):n.default.sendMessage("soundPlay","Move"),this.displayPlayer(),n.default.sendMessage("checkHitFromPlayer",this._index)}},_moveRight:function(){if(this._movable&&(this._goalRight||this._index!==this.indexMax-1)){var t=this._index;this._index=Math.min(this._index+1,this.indexMax),this._goalRight&&t<this.indexMax&&this._index===this.indexMax?(this._goalRight=!1,n.default.sendMessage("soundPlay","Material")):n.default.sendMessage("soundPlay","Move"),this.displayPlayer(),n.default.sendMessage("checkHitFromPlayer",this._index)}},goalCountUp:function(){this._goalCount+=1,this._goalCount%4==0&&n.default.sendMessage("levelUp")},displayPlayer:function(){var t=this;this.objects.forEach(function(e,i){e.display(i===t._index)},this),this._goalRight?(this.materials.displayMaterialOff(),this.materials.displayMaterialOn(this.indexMax)):this.materials.displayMaterialOn(this._index)},_turnStart:function(){this._movable=!0,this._index=0,this._goalRight=!0,this.displayPlayer()},_moveStop:function(){this._movable=!1}}),cc._RF.pop()},{"./LCObject":"LCObject","./Materials":"Materials","./utils/MessagePipeline":"MessagePipeline"}],Score:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}cc._RF.push(e,"e5665Hv2oNCmrqkKkjmEyI6","Score");var n=s(t("./LCDigit")),a=s(t("./utils/MessagePipeline"));cc.Class({extends:cc.Component,properties:{digits:{default:[],type:[n.default]}},onLoad:function(){this._score=0,a.default.on("scoreReset",this._scoreReset,this),a.default.on("addScore",this._addScore,this)},_scoreReset:function(){this._score=0,this._displayScore()},_addScore:function(t){var e=t.getUserData();this._score=Math.min(this._score+e,999),this._displayScore()},_displayScore:function(){for(var t=this._score,e=0;e<this.digits.length;e++){var i=Math.pow(10,this.digits.length-(e+1));if(e<this.digits.length-1&&this._score<i)this.digits[e].display();else{var s=Math.floor(t/i);t-=i*s,this.digits[e].display(s)}}}}),cc._RF.pop()},{"./LCDigit":"LCDigit","./utils/MessagePipeline":"MessagePipeline"}],Sounds:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}cc._RF.push(e,"0d665KFLOhLoq2Vqz/OrXxF","Sounds");var n=s(t("./utils/MessagePipeline")),a=s(t("./LCObject")),o="teakwatch:soundon",c={GameStart:0,Tick:1,Move:2,Material:3,Goal:4,Bonus:5,Damage:6,GameOver:7};cc.Class({extends:cc.Component,properties:{soundIcon:a.default,audioClips:{default:[],type:[cc.AudioClip]}},onLoad:function(){this.isSoundOn=!0,this.loadSoundOn(),this.soundIcon.display(this.isSoundOn),cc.audioEngine.setMaxAudioInstance(5),n.default.on("soundPlay",this._soundPlay,this)},loadSoundOn:function(){var t=cc.sys.localStorage.getItem(o);this.isSoundOn=1===t||null===t},saveSoundOn:function(){var t=0;this.isSoundOn&&(t=1),cc.sys.localStorage.setItem(o,t)},$toggleSound:function(){this.isSoundOn=!this.isSoundOn,this.soundIcon.display(this.isSoundOn)},_soundPlay:function(t){var e=t.getUserData();if(this.isSoundOn){var i=c[e];0<=i&&i<this.audioClips.length&&cc.audioEngine.play(this.audioClips[i],!1,1)}}}),cc._RF.pop()},{"./LCObject":"LCObject","./utils/MessagePipeline":"MessagePipeline"}]},{},["BonusStack","Game","LCDigit","LCObject","Lane","Lanes","Life","Materials","MoveButton","Player","PlayerHit","Score","Sounds","MessagePipeline"]);